**这是我参与「第五届青训营 」伴学笔记创作活动的第 7 天**

# 一、本堂课重点内容

-  架构定义解析
-  企业级后端架构剖析
-  业内后端架构面临的挑战
-  后端架构实战

# 二、详细知识点介绍

## 2.1 架构定义解析

**什么是架构？**

-   是有关软件整体结构与组件的抽象描述
-   用于指导软件系统各个方面的设计

通俗而言，架构在实现一个软件的方法选择上起着至关重要的指导作用。

接下来从几个方面深入探究架构的定义：
1. 单机方面：
	- 软件系统需要具备对外提供服务，单机就是把所有功能都实现在一个进程里，并部署在一台机器上
	- 具有简单的优点
	- 但会带来C10K problem（单机架构如果在一个机器上部署，它的服务能力是有瓶颈的）和运维停服的问题
2. 单体、垂直应用的方面：
	- 单体架构：分布式部署
	- 垂直应用架构：按应用垂直切分的单体
	- 具有水平扩容、运维不需要停服的优点
	- 但会带来职责太多，开发效率不高，以及爆炸半径大的问题
3. SOA、微服务|水平切分
	- SOA（Service-Oriented Architecture）：将应用的不同功能单元抽象为服务、定义服务之间的通信标准
	- 微服务架构：SOA的去中心化演进方向
	- 但会带来数据一致性、高可用、治理、解耦vs过微的问题

**小结（以做蛋糕为例）：**
1. 架构的演进初衷：做蛋糕
	- 需求量越来越大，终归要增加人手
	- 越做越复杂，终归要分工合作
2. 架构的演进思路：切蛋糕
	- 竖着切(垂直切分)
	- 横着切(水平切分)

## 2.2 企业级后端架构剖析

1. 云计算
	- 通过软件自动化管理，提供计算资源的服务网络，是现代互联网大规模数据分析和存储的基石。
	- 基础：
		- 虚拟化技术 : 硬件（虚拟机）、操作系统（容器）、网络
	        - 编排方案 : 虚拟机编排方案（OpenStack)、容器编排方案（Kubernetes)
	- 架构
		- IaaS (Infrastructure as a Service)
		- PaaS (Platform as a Service)
		- SaaS (Software as a Service)
		- FaaS (Function as a Service)
2. 云原生
	- 云原生技术为组织(公司)在公有云、自由云、混合云等新型的动态环境中，构建和运行可弹性拓展的应用提供了可能。
	- 分类：
		- 弹性资源：基于虚拟化容器以及灵活的编排调度机制，可以为云服务提供快速扩缩容能力，而且极大程度地提高了物理资源的利用率。在这方面，kubernetes 技术已经称为了业界的标准
		- 微服务架构：还记得前面我们聊到的微服务架构么？没错，它也是云原生的重要基石之一。依托于功能单元解构，使得云服务具备了快速迭代的可能，业务得以迅速发展；统一的通信标准能够帮助越来越多的组件加入到云原生的大家庭，同时也使得各组件之间的交互变的更容易
		- DevOps：设计->开发->测试->交付->开发->测试->交付，自动化的流程使得软件的工作流程更高效，将微服务架构的优势发挥的淋漓尽致
		- 服务网格：如果说微服务架构的重要进步，是将庞大的单体服务按照业务功能解耦开来，那么，服务网格的重要进步就是将业务逻辑与网络通信和治理解耦开来。业务不再需要关心异构系统中 RPC 中间件治理能力的不统一，也使得复杂的治理能力的落地成为可能
**小结（以做蛋糕为例）：**
- 售卖
- 蛋糕制作(肉松、 慕斯)
- 会员激励
- 满意度分析
- 研发新品

## 2.3 业内后端架构面临的挑战

### 2.3.1 挑战

- 基础设施层面
	- 物理资源是有限的（机器、带宽）
	- 资源利用率受制于部署服务
- 用户层面
	- 网络通信开销较大
	- 网络抖动导致运维成本提高
	- 异构环境下，不同实例资源水位不均

### 2.3.2 解决方案

1. 离在线资源并池
	- 核心收益
		- 降低物理资源成本
		- 提供更多的弹性资源，增加收入
	- 在线业务的特点：IO密集型为主，具有潮汐性、实时性
	- 离线业务的特点：计算密集型占多数、非实时性
2. 自动扩缩容
	- 核心收益
		- 降低业务成本
	- 利用在线业务潮汐性自动扩缩容
3. 微服务亲合性部署
	- 核心收益
		- 降低业务成本
		- 提高服务可用性
	- 将满足亲合性条件的容器调度到一台宿主机
	- 微服务中间件与服务网格通过共享内存通信
	- 服务网格控制面实施灵活、动态的流量调度
4. 流量治理
	- 核心收益
		- 提高微服务调用容错性
		- 容灾
		- 进一步提高开发效率，DevOps 发挥到极致
	- 熔断、重试
	- 单元化
	- 复杂环境的流量调度
5. CPU水位负载均衡
	- 核心收益
		- 打平异构环境算力差异
		- 为自动扩缩容提供正向输入
	- laas：提供资源探针
	- 服务网格：动态负载均衡


# 三、引用参考

- [企业级后端架构剖析](https://juejin.cn/course/bytetech/7142773151435489288/section/7142774078720442398)
- [架构定义解析](https://juejin.cn/course/bytetech/7142773151435489288/section/7142776645873565709)
- [业内后端架构面临的挑战](https://juejin.cn/course/bytetech/7142773151435489288/section/7142777131703992334)
