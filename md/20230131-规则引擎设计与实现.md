**这是我参与「第五届青训营 」伴学笔记创作活动的第 6 天**

# 一、本堂课重点内容

- 认识规则引擎
- 编译原理基本概念
- 设计一个规则引擎
- 规则引擎的实现

# 二、详细知识点介绍

## 1. 什么是规则引擎？

规则引擎是一种嵌入在应用程序中的组件，实现了将业务决策从应用程序代码中分离出来，并
使用预定义的语义模块编写业务决策。接受数据输入，解释业务规则，并根据业务规则做出业
务决策。使用规则引擎的好处是解决开发人员重复编码的问题、业务决策与服务本身解耦，提高服务的可维护性，缩短开发路径、提高效率。

规则引擎由**数据输入、规则理解、规则执行**组成。
- 数据输入：支持预定义的语义编写的规则作为数据集，接收业务中的数据作为执行过程中的参数
- 规则理解：能够按照预定义的语法、词法、优先级、运算符等正确理解业务规则表达的语义
- 规则执行：根据执行时输入的参数对策略集中的规则进行正确的解释和执行

规则引擎常在风控对抗、活动策略经营、数据分析和清洗等方面运用。

## 2. 编译原理基本概念

规则引擎中重要的部分有词法分析和语法分析，本质是我们自己定义一套语法，然后去解析用这套语法写的表达式，然后根据解析的内容执行表达式。这个过程其实就是编译和执行的过程。

-  词法分析：源代码字符串转换为词法单元(Token)的这个过程。词法分析的核心是使用有限自动机完成状态转换。
	- 如何识别Token？使用**有限自动机**，有限自动机就是一个状态机，它的状态数量是有限的。该状态机在任何一个状态，基于输入的字符，都能做一个确定的状态转换。
-  语法分析：在词法分析的基础上，识别表达式语法结构的过程。
-  抽象语法树：表达式的语法结构可以用树来表示，其每个节点(子树)是一个语法单元，这个单元的构成规则就叫”语法”。每个节点还可以有下级节点。分为上下文无关文语法和递归下降算法。上下文无关文语法是语言句子无需考虑上下文，就可以判断正确性；递归下降算法就是自顶向下构造语法树，不断的对Token进行语法展开(下降)，展开过程中可能会遇到递归的情况。     
-   类型检查
	- 类型综合：根据子表达式的类型构造出父表达式的类型。例如，表达式A+B的类型是根据A和B的类型定义的
	- 编译时检查：需要提前声明参数的类型，在构建语法树过程中进行类型检查
	- 运行时检查：可以根据执行时的参数输入的值类型，在执行过程中进行类型检查

# 三、引用参考

- [「【实践课】规则引擎设计与实现」第五届字节跳动青训营 - 后端专场](https://live.juejin.cn/4354/ycRuleEngine)
- [【后端专场 学习资料三】第五届字节跳动青训营 - 掘金 (juejin.cn)](https://juejin.cn/post/7193363381804335161/#heading-0)